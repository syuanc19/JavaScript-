# JavaScript 入门笔记 1.变量、常量与标识符
[TOC]<br>
<p>
<a href="#1">变量<br>
<a href="#2">let和const、全局与局部变量<br>
<a href="#3">js变量内存结构概述图<br>
<a href="#4">常量<br>
<a href="#5">标识符

# <p id="1">变量//

## #1 命名规则</p>

- 变量名中可以包含数字、字母、下划线`_`、美元符号`$`；
- 变量名中不能出现汉字；
- 变量名中不能包含空格；
- 变量名不能是 JS 中的关键字、保留字；
- 变量名不能以数字开头，即第一个字符不能为数字;
- 大小写严格区分a A; c C; 皆为不同变量。

## #2 变量定义

JS中，定义变量使用`var` `let` `const`

## #3 var

==var 无 块作用域==

```js
var 变量名;
```

例:

```js
var age; //用来储存年纪
var str; //用来储存字符串
var prePage; //用来储存上一页
```

## #4 let

==let 有 块作用域==

## #5 const

const 用于声明一个或多个常量，声明时必须进行初始化，且`初始化后`值`不可再修改`：

因此在js中，会使用它来声明`常量` //#2.JavaScript 入门笔记 2.常量

```js
//错误写法
const PI;
PI = 3.14159265;

//正确写法
const PI = 3.14159265;

//不可以被重复定义
const PI = 3.14159265;
PI = 3.14; //报错
PI = PI + 10; //报错
```

## #6 多变量定义

声明多个变量，用分号隔开，跳行写是为了更整齐

```js
var a,
    b,
    c; //声明多个变量，用分号隔开，跳行写是为了更整齐
```

定义变量后，如果没有赋值，则该变量会变成 undefined



一条语句中声明的多个变量不可以同时赋同一个值:

```js
var x, y, z='1';
// x, y为undefined，z为1
```

## #7 变量赋值

```js
var num = 1; //把1赋值给num
var a = 1,
    b = 2,
    c = 3; //多变量赋值
```

## #8 变量提升 (Hoisting)

JS 在预编译期会先预处理声明的变量，但是变量的赋值操作发生在 JS 执行期，而不是预编译期。

```js
document.write(str); //显示undefined
str = 'Hello, Web';
document.write(str); //显示Hello, Web;
var str;
```

上述案例，声明放在最后，赋值放在前面，由于 JS 在预编译期已经对变量声明语句进行了预解析，所以第1行代码读取变量值时不会抛出异常，而是返回未初始化的值 undefined。第3行代码是在赋值操作之后读取，故显示为'Hello, Web'。

JS 引擎的解析方式是：

1. 解析代码

2. 获取所有被声明的变量

3. 逐行运行

   这样，所有声明的变量都会被提升到代码的头部，这就叫作变量提升（Hoisting）。
   

> var定义的变量可以先使用后声明，而let不行

```js
alert(Name);//先使用 
var Name="王大明";//后声明
//输出Name=王大明
```

```js
laert(Name);
let Name="王大明";
//报错
```

> var定义的变量可以先使用后声明，而let不行

***

# <p id="2">let 和 const、全局与局部变量//

ECMA6(ES6)后新增的两个定义变量关键字，同级于var，其中

- 使用 `let` 关键字声明的变量只在其所在的代码块中有效（类似于局部变量），并且在这个代码块中，同名的变量不能重复声明；

- `const` 关键字的功能和 let 相同，但使用 const 关键字声明的变量还具备另外一个特点，那就是 const 关键字定义的变量，一旦定义，就不能修改

  （即使用 const 关键字定义的为`常量`）。

- `const`定义常量与使用`let`定义的变量相似：

  1. 二者都是块级作用域
  2. 都不能和它们所在作用域内的其他变量或函数拥有相同的名称

- 两者还有以下两点区别：
  1. `const`声明的常量必须初始化，而`let`声明的变量不用
  2. `const` 定义常量的值不能通过再赋值修改，也不能再次声明。而 `let` 定义的变量值可以修改。

```js
let name = '小白';
let name = '小黑';
//控制台报错: Uncaught SyntaxError: Identifier 'name' has already been declared(在该let所属的代码块中，name不能被重复定义)
```

>IE10 及以下的版本不支持 let 和 const 关键字。
>
>在ES6以前，js只有两种作用域，`全局变量`与`局部变量`

## #1 全局变量

```js
var carName = 'benz';
//这里可以使用 carName变量

function myFunction() {
//这里也可以使用 carName变量
}
```

指在函数外声明的变量作用域是`全局`的，全局变量在 JavaScript 程序的任何地方都可以访问。

## #2 局部变量

```js
//这里不能使用 carName变量

function myFunction() {
    var carName = "Volvo";
    //这里可以使用 carName变量
}
//这里不能使用carName 变量
```

在`函数内`声明的变量作用域`局部`的

==函数内使用 var 声明的变量只能在函数内访问，如果不使用 var 则是全局变量。==

## #3 重新声明变量

js里，变量可以被重新声明，值并不会丢失，例如

```js
var str = 'syuan';
var str;
//语句执行后，str的值仍然是syuan
```

## #4 重新定义变量

但使用var重新声明的变量也可能带来一些问题，如

```js
var x = 10; //这里输出为 x=10
{
    var x = 5; //这里输出为 x=5
}
//这里输出为 x=5
```

==在块中重新声明变量也会重新声明块外的变量==

使用`let`便可以解决此问题

```js
var x = 10; //这里输出为 x=10
{
    let x =5; //这里输出为 x=5
}
//这里输出为 x=10
```

## #5 重置变量

1. 在相同的作用域或块级作用域中，`不能使用 let 关键字来重置 var 关键字声明的变量`:

```js
var x = 2; //合法
let x = 3; //不合法

{
    var x = 4; //合法
    let x = 5; //不合法
}
```

2. 在相同的作用域或块级作用域中，`不能使用 let 关键字来重置 let 关键字声明的变量`:

```js
let x = 2; //合法
let x = 3; //不合法

{
    let x = 4; //合法
    let x = 5; //不合法
}
```

3. 在相同的作用域或块级作用域中，`不能使用 var 关键字来重置 let 关键字声明的变量`:

```js
let x = 2;       // 合法
var x = 3;       // 不合法

{
    let x = 4;   // 合法
    var x = 5;   // 不合法
}
```

4. **let** 关键字`在不同作用域，或不同块级作用域中是可以重新声明赋值的`:

```js
let x = 2;       // 合法

{
    let x = 3;   // 合法
}

{
    let x = 4;   // 合法
}

```

***

# <p id="3">js变量内存结构概述图//

<img align=center src="https://raw.githubusercontent.com/syuanc19/picbed/main/2022/12/upgit_20221213_1670870937.png">

1. 实际上 在js里，变量跟值并不存在同一个地方，由于无法确定值的大小...

   `为了避免造成溢出或浪费，内存会给_变量_一个位址 ，并单独给_值_一个 附带位址的盒子。`

2. 图解中，b也被赋值了同样的值，因此不会重复创建值的盒子

>浪费区块图解

<img src="https://raw.githubusercontent.com/syuanc19/picbed/main/2022/12/upgit_20221213_1670871434.png">

***

# <p id="4">常量//

常量就是不可变的变量，如圆周率的值3.14159265... ，就是一个固定的、不可变的常量例子。

## #1 常量规则

- 在 js 中，使用 const 声明常量

- 常量只能赋值一次，重复赋值会报错

***

# <p id="5">标识符//

在 js 中，所有可以由我们自主命名的内容，都可以认为是一个标识符

像变量名、函数名 类名等等

## #1 命名规则

- 标识符只能含有字母、数字、下划线、$ 且不能以数字开头
- 不能用js里的保留字、关键字 - [JavaScript 保留关键字 | 菜鸟教程 (runoob.com)](https://www.runoob.com/js/js-reserved.html)

- 命名规范推荐使用驼峰命名法
  - 驼峰: myFirstProject
  - 大驼峰: MyFirstProject

- 常量的字母全部会大写
  - 例：MAX_LENGTH

***

# 分号//

js中，如果语句各自占一行，通常可以省略语句之间的分号(程序结尾 或右花刮号'}'之前的分号也可以省略)，但有几个细节需注意

- 1.

  - 如下代码，考虑到两条语句是独立的，所以第一个分号可以省略

  - ```js
    let a = 1
    let b = 2;
    ```

  - 但如果是单行书写格式，则不能省略

  - ```js
    let a = 1 let b = 2; //false
    let a = 1; let b = 2; //true
    ```

js并不是在所有的换行处都会填补分号，只有在`缺少了分号就无法正确解析代码时`，js才会填补分号，换句话说，如果当前语句和随后的非空格字符不能当成一个整体来解析时，js就会在当前语句行结束处填补分号，如下

- 1.

  - ```js
    let a
    a
    =
    1
    ```

    js会将其解析为

  - ```js
    let a; a = 1;
    ```

  - 此例子中，如果没有分号，js就无法正常解析代码`let a a`，第二个a可以独立当做一条语句`'a;' `，但js并没有给它的结尾处分号，因为它可以被第三行内容一起解析为`a=3;`

- 2.

  - ```js
    //例子二
    let y = x + f
    (a+b).toString()
    ```

    会被解析为

  - ```js
    let y = x + f(a+b).toString()
    ```

- 3.

  - ```js
    //例子三
    return
    true;
    ```

    会被解析为

  - ```js
    return; true;
    ```

    而它的本意是

  - ```js
    return true;
    ```

js中，以`'(' '[' '/' '+'或'-'`开始，就极有可能和前一句语句合在一起解析，实例中最常见为`'()'`或`'[]'`，我们可以习惯在语句前加上一个分号，这样子哪怕之前的语句被修改了，分号被误删，当前的语句还是会正确的解析

```js
let x = 0 //这里省略了分号
;[x,x+1,x+2].forEach(console.log) //前面的分号保证了语句正确的解析
```

>参考网站
>
>[JS变量定义和赋值 (biancheng.net)](http://c.biancheng.net/view/9339.html)
>
>[JavaScript 变量 | 菜鸟教程 (runoob.com)](https://www.runoob.com/js/js-variables.html)
